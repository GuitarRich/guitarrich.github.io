<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Sitecore 8 and SOLR Upgrading | Sitecore Nuts &amp; Bolts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Just read a great post by Jon Stoneman at Sequence on how to get Sitecore 8 working with Solr. Their experiences are very similar to mine, but I came across some other “gotchas” that I wanted to share">
<meta name="keywords" content="Sitecore,SOLR,Sitecore 8">
<meta property="og:type" content="article">
<meta property="og:title" content="Sitecore 8 and SOLR Upgrading">
<meta property="og:url" content="http://www.sitecorenutsbolts.net/2015/01/14/Sitecore-8-and-SOLR-Upgrading/index.html">
<meta property="og:site_name" content="Sitecore Nuts &amp; Bolts">
<meta property="og:description" content="Just read a great post by Jon Stoneman at Sequence on how to get Sitecore 8 working with Solr. Their experiences are very similar to mine, but I came across some other “gotchas” that I wanted to share">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-05-12T14:52:21.744Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sitecore 8 and SOLR Upgrading">
<meta name="twitter:description" content="Just read a great post by Jon Stoneman at Sequence on how to get Sitecore 8 working with Solr. Their experiences are very similar to mine, but I came across some other “gotchas” that I wanted to share">
  
  

  <link rel="stylesheet" href="/css/style.css">
  
  
  


  

<!--
  
    <link href='//fonts.useso.com/css?family=Titillium+Web:300,400,600' rel='stylesheet' type='text/css'>
    <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
-->
</head>
</html>
<body>
  <div id="wrap">
    <header id="header">
  <div id="header-outer" class="outer">
    <div class="container">
      <div class="container-inner">
        <div id="header-title">
          <h1 class="logo-wrap">
            <a href="/" class="logo"></a>
          </h1>
          
            <h2 class="subtitle-wrap">
              <p class="subtitle">Design it, Code it, Build it. C# &amp; Sitecore!</p>
            </h2>
          
          
          <div class="mvp">
            <a href="http://www.sitecore.net/mvp" target="_blank">
              <img src="/about/index/MVP2016.jpg" alt="Sitecore MVP 2016-2020">
            </a>
            <a href="http://www.sitecore.net/mvp" target="_blank">
              <img src="/about/index/Technology2020.jpg" alt="Sitecore MVP 2016-2020">
            </a>
            <a href="http://www.sitecore.net/mvp" target="_blank">
              <img src="/about/index/Technology2019.jpg" alt="Sitecore MVP 2016-2020">
            </a>
            <a href="http://www.sitecore.net/mvp" target="_blank">
              <img src="/about/index/Technology2018.jpg" alt="Sitecore MVP 2016-2020">
            </a>
            <a href="http://www.sitecore.net/mvp" target="_blank">
                <img src="/about/index/Technology2017.jpg" alt="Sitecore MVP 2016-2020">
            </a>
            <a href="http://www.sitecore.net/mvp" target="_blank">
                <img src="/about/index/Technology2016.jpg" alt="Sitecore MVP 2016-2020">
            </a>
          </div>
          
        </div>
        <div id="header-inner" class="nav-container">
          <a id="main-nav-toggle" class="nav-icon"></a>
          <div class="nav-container-inner">
            <ul id="main-nav">
              
            </ul>
            <nav id="sub-nav">
              <div id="search-form-wrap">
                <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://www.sitecorenutsbolts.net"></form>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
    <div class="container">
      <div class="main-body container-inner">
        <div class="main-body-inner">
          <section id="main">
            <div class="main-body-header">

              <h1 class="header"><a class="page-title-link" href="/categories/Sitecore/">Sitecore</a></h1>
            </div>
            <div class="main-body-content">
              
  <article id="post-Sitecore-8-and-SOLR-Upgrading" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
      <!--  -->
      
        <header class="article-header">
          
  
    <h1 class="article-title" itemprop="name">
      Sitecore 8 and SOLR Upgrading
    </h1>
  

        </header>
      
      <p class="article-byline">
        <a href="/2015/01/14/Sitecore-8-and-SOLR-Upgrading/" class="article-date">
  <time datetime="2015-01-14T14:36:14.000Z" itemprop="datePublished">2015-01-14</time>
</a>
      </p>
      <div class="article-entry" itemprop="articleBody">
        <code>Estimated reading time:<span class="eta"></span></code>
        <p>Just read a great post by <a href="http://www.sequence.co.uk/blog/authors/jon-stoneman/" target="_blank" rel="noopener">Jon Stoneman</a> at Sequence on how to get <a href="http://www.sequence.co.uk/blog/sitecore-8-and-solr/" target="_blank" rel="noopener">Sitecore 8 working with Solr</a>. Their experiences are very similar to mine, but I came across some other “gotchas” that I wanted to share.</p>
<h4 id="Old-Config-FIles"><a href="#Old-Config-FIles" class="headerlink" title="Old Config FIles"></a>Old Config FIles</h4><p>In Sitecore 8 the Solr configuration files have changed a lot. The file name has changed, so you will need to make sure you remove the v7.x Solr config files.</p>
<h4 id="Naming-The-Core"><a href="#Naming-The-Core" class="headerlink" title="Naming The Core"></a>Naming The Core</h4><p>By default, Sitecore 8 uses a different Solr core for each database and each module, historically at Lightmaker we have used a single Solr core for all databases. Following Sitecore best practice, all the settings were made using include files. This means during upgrades we can just add the new config files from Sitecore and we don’t have to re-apply all our changes.</p>
<p>This was the config we had for Solr:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">indexes</span> <span class="attr">hint</span>=<span class="string">"list:AddIndex"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_master_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_web_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_core_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">indexes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The problem here was that Sitecore 8 has added an extra indexes for analytics, FXM, testing etc… Unfortunately rather than getting an error stating that the core could not be found, you just get</p>
<blockquote>
<h5 id="Connection-error-to-search-provider-Solr-Unable-to-connect-to-http-localhost-8983-solr"><a href="#Connection-error-to-search-provider-Solr-Unable-to-connect-to-http-localhost-8983-solr" class="headerlink" title="Connection error to search provider [Solr] : Unable to connect to [http://localhost:8983/solr]"></a><em>Connection error to search provider [Solr] : Unable to connect to [<a href="http://localhost:8983/solr]" target="_blank" rel="noopener">http://localhost:8983/solr]</a></em></h5></blockquote>
<p>Which is not that helpful. If you get this error and the Solr instance is running and you can load the specified Url, then it is probably the Solr Core name that is wrong.</p>
<p>All we needed to do was to add in the Solr Core names for the new indexes and we were up and running.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">indexes</span> <span class="attr">hint</span>=<span class="string">"list:AddIndex"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_master_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_web_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_core_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_analytics_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_testing_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_suggested_test_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_fxm_master_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_fxm_web_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_list_index"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"social_messages_master"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"social_messages_web"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_marketing_asset_index_master"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> <span class="attr">id</span>=<span class="string">"sitecore_marketing_asset_index_web"</span> <span class="attr">type</span>=<span class="string">"Sitecore.ContentSearch.SolrProvider.SolrSearchIndex, Sitecore.ContentSearch.SolrProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"core"</span>&gt;</span>NameOfCore<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">indexes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>– Richard Seal</p>

      </div>
      <footer class="article-footer">
        <a data-url="http://www.sitecorenutsbolts.net/2015/01/14/Sitecore-8-and-SOLR-Upgrading/" data-id="cka5tzg9n0042gsvreau6oq7q" class="article-share-link">Share</a>
        
          <a href="http://www.sitecorenutsbolts.net/2015/01/14/Sitecore-8-and-SOLR-Upgrading/#comments" class="article-comment-link">Comments</a>
        
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SOLR/">SOLR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sitecore/">Sitecore</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sitecore-8/">Sitecore 8</a></li></ul>

      </footer>
    </div>
  </article>
  
    <section id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </section>
  


<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-55d6161f325b85fa" async="async"></script>
            </div>
          </section>
          <aside id="sidebar">
  <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
  <div class="sidebar-top">
    <p>follow:</p>
    <ul class="social-links">
      
    </ul>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/05/20/Moving-my-Blog/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">newer</strong>
      <p class="article-nav-title">
        
          Moving My Blog - Adventures in Hexo
        
      </p>
      <i class="icon" id="icon-chevron-right"></i>
    </a>
  
  
    <a href="/2014/12/02/Sitecore-MVC-Custom-Caching-Vary-by-External-Data/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">older</strong>
      <p class="article-nav-title">Sitecore MVC Custom Caching - Vary by External Data</p>
      <i class="icon" id="icon-chevron-left"></i>
    </a>
  
</nav>

  
  <div class="widgets-container">
    
  </div>
</aside>
        </div>
      </div>
    </div>
    <footer id="footer">
  
  <div class="container">
    <div class="container-inner">
      <a id="back-to-top" href="javascript:;"><i class="icon" id="icon-angle-up"></i></a>
      <div class="credit">
        <h1 class="logo-wrap">
          <a href="/" class="logo"></a>
        </h1>
        <p>&copy; 2020 Richard Seal</p>
        <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>.
      </p></div>
    </div>
  </div>
</footer>
    
<script>
  var disqus_shortname = 'sitecorenutsbolts';
  
  var disqus_url = 'http://www.sitecorenutsbolts.net/2015/01/14/Sitecore-8-and-SOLR-Upgrading/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



  <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>






<script src="/js/html-patch.js"></script>
<script src="/js/script.js"></script>
<script src="/js/readingTime.min.js"></script>

<script>
  $(function() {
    $('.article-entry').readingTime();
  });
</script>

  </div>
</body>
</html>
